---
- name: Update apt cache if needed.
  apt: update_cache=yes cache_valid_time=86400

- name: Install required dependencies.
  apt: "name={{ item }} state=installed"
  with_items:
    - curl
    - python-apt
    - python-pycurl
    - sudo
    - unzip
    - make

- name: Ensure necessary groups exist.
  group: "name={{ item }} state=present"
  with_items:
    - admin
    - dialout

- name: Ensure user is in admin group.
  user: "name={{ current_user }} append=yes groups=admin"

- name: Configure /etc/mailname.
  copy:
    content: "{{ hostname_fqdn }}\n"
    dest: /etc/mailname
